{"version":3,"sources":["components/TopFiveIceCreamShops.js","index.js"],"names":["TopFiveIceCreamShops","useState","setFetching","setData","useEffect","getBusinesses","AUTH","process","axios","get","headers","Authorization","then","res","businesses","data","console","log","forEach","id","getBusinessReviews","catch","error","REVIEWS_URL","reviews","user","name","ReactDOM","render","document","getElementById"],"mappings":"0NA+FeA,EA5Fc,WAAO,IAAD,EACDC,oBAAS,GADR,mBAChBC,GADgB,aAETD,mBAAS,IAFA,mBAEpBE,GAFoB,WAIjCC,qBAAU,WACRC,MACC,IAEH,IAAMA,EAAgB,WACpB,IAAMC,EAAI,iBAAaC,oIAEvBL,GAAY,GAEZM,IACGC,IAJW,4IAIG,CACbC,QAAS,CACPC,cAAeL,KAGlBM,MAAK,SAACC,GACL,IAAMC,EAAaD,EAAIE,KAAKD,WAC5BE,QAAQC,IAAI,cAAeH,GACxBA,GACDA,EAAWI,SAAQ,YAAW,IAATC,EAAQ,EAARA,GACnBC,EAAmBD,MAGvBhB,EAAQ,CACNY,KAAMF,EAAIE,KAAKD,gBAGlBO,OAAM,SAACC,GAAD,OAAWN,QAAQC,IAAIK,OAG5BF,EAAqB,SAACD,GAC1B,IACMb,EAAI,iBAAaC,oIACjBgB,EAAW,iFAA6EJ,EAA7E,YAEjBjB,GAAY,GAGKM,IAAMC,IAAIc,EAAa,CACpCb,QAAS,CACPC,cAAeL,KAEhBM,MAAK,SAAAC,GACUA,EAAIE,KAAKS,QAGfX,EAAIE,KAAKS,QAAQ,GACfX,EAAIE,KAAKS,QAAQ,GAAGC,KAAKC,KAGrCV,QAAQC,IAAI,WAAYJ,EAAIE,KAAKS,YAChCH,OAAM,SAAAC,GAAK,OAAIN,QAAQC,IAAIK,OAGlC,OACE,uCC1DJK,IAASC,OAAO,kBAAC,EAAD,MAA0BC,SAASC,eAAe,W","file":"static/js/main.cb25d122.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst TopFiveIceCreamShops = () => {\r\n  const [fetching, setFetching] = useState(false);\r\n  const [data, setData] = useState({});\r\n\r\n  useEffect(() => {\r\n    getBusinesses();\r\n  }, []);\r\n\r\n  const getBusinesses = () => {\r\n    const AUTH = `Bearer ${process.env.REACT_APP_FUSION_API_KEY}`;\r\n    const DATA_URL = `https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=Ice%20Cream%20Shop&location=Alpharetta%2C%20GA&limit=5`;\r\n    setFetching(true);\r\n    // Await Data\r\n    axios\r\n      .get(DATA_URL, {\r\n        headers: {\r\n          Authorization: AUTH,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        const businesses = res.data.businesses\r\n        console.log(\"Businesses \", businesses)\r\n        if(businesses) {\r\n          businesses.forEach(({id}) => {\r\n            getBusinessReviews(id)\r\n          })\r\n        }\r\n        setData({\r\n          data: res.data.businesses,\r\n        });\r\n      })\r\n      .catch((error) => console.log(error));\r\n  };\r\n\r\n  const getBusinessReviews = (id) => {\r\n    let shopReview = []\r\n    const AUTH = `Bearer ${process.env.REACT_APP_FUSION_API_KEY}`;\r\n    const REVIEWS_URL = `https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/${id}/reviews`;\r\n\r\n    setFetching(true);\r\n\r\n      // Await review\r\n      const review = axios.get(REVIEWS_URL, {\r\n        headers: {\r\n          Authorization: AUTH,\r\n        },\r\n      }).then(res => {\r\n        const reviews = res.data.reviews\r\n\r\n        const constructReviews = {\r\n          review: res.data.reviews[0], \r\n          reviewer: res.data.reviews[0].user.name\r\n        }\r\n        \r\n        console.log(\"Reviews \", res.data.reviews)\r\n      }).catch(error => console.log(error));\r\n  };\r\n\r\n  return (\r\n    <div>Hello</div>\r\n    // Object.keys(props.data).map(item => {\r\n    //     // Destructure data needed and display it\r\n    //     const data = props.data;\r\n    //     const { name, image_url, id} = data[item];\r\n    //     const { address1, city } = ((data[item] || {}).location || {});\r\n    //     const { text, reviewer } = ((data[item] || {}).review || {});\r\n\r\n    //     return (\r\n    //         <div key={id} className=\"container\">\r\n    //             <div className=\"card mb-2\">\r\n    //                 <div className=\"row no-gutters\">\r\n    //                     <div className=\"col-md-4\">\r\n    //                         <img src={image_url} className=\"card-img\" alt=\"\" style={{ maxHeight: 250, maxWidth: 250 }} />\r\n    //                     </div>\r\n    //                     <div className=\"col-md-4\">\r\n    //                         <div className=\"card-body\">\r\n    //                             <h5 className=\"card-title\">{name}</h5>\r\n    //                             <h5 className=\"card-title\">{`${address1}, ${city}`} </h5>\r\n    //                             <p>{text}</p>\r\n    //                             <span>{reviewer}</span>\r\n    //                         </div>\r\n\r\n    //                     </div>\r\n\r\n    //                 </div>\r\n    //             </div>\r\n    //         </div>\r\n    //     );\r\n    // })\r\n  );\r\n};\r\n\r\nexport default TopFiveIceCreamShops;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TopFiveIceCreamShops from './components/TopFiveIceCreamShops';\r\n\r\nReactDOM.render(<TopFiveIceCreamShops />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}