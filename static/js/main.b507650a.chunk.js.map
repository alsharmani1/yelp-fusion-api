{"version":3,"sources":["components/TopFiveIceCreamShops.js","index.js"],"names":["TopFiveIceCreamShops","useState","fetching","error","request","setRequest","businessData","setbusinessData","useEffect","getBusinesses","a","AUTH","process","axios","get","headers","Authorization","businesses","Promise","all","data","map","id","name","image_url","location","address1","city","REVIEW_URL","reviews","review","text","reviewer","user","result","style","textAlign","className","key","ReactDOM","render","document","getElementById"],"mappings":"sQAkFeA,G,MA7Ec,WAAO,IAAD,EACHC,mBAAS,CAAEC,UAAU,EAAOC,OAAO,IADhC,mBAC1BC,EAD0B,KACjBC,EADiB,OAEOJ,mBAAS,IAFhB,mBAE1BK,EAF0B,KAEZC,EAFY,KAIjCC,qBAAU,WACRC,MACC,IAEH,IAAMA,EAAa,uCAAG,gCAAAC,EAAA,6DACpBL,EAAW,CAAEH,UAAU,EAAMC,OAAO,IAC9BQ,EAFc,iBAEGC,oIAFH,8JAMOC,IAAMC,IANb,4IAM+B,CAC/CC,QAAS,CACPC,cAAeL,KARD,cAMZM,EANY,gBAYGC,QAAQC,IAC3BF,EAAWG,KAAKH,WAAWI,IAA3B,uCACE,2CAAAX,EAAA,6DAASY,EAAT,EAASA,GAAIC,EAAb,EAAaA,KAAMC,EAAnB,EAAmBA,UAAWC,EAA9B,EAA8BA,SACpBC,EAAmBD,EAAnBC,SAAUC,EAASF,EAATE,KAEZC,EAHR,iFAG+FN,EAH/F,qBAIwBT,IAAMC,IAAIc,EAAY,CAC1Cb,QAAS,CACPC,cAAeL,KANrB,cAIQkB,EAJR,yBAUS,CACLN,OACAC,YACAE,WACAC,OACAG,OAAQD,EAAQT,KAAKS,QAAQ,GAAGE,KAChCC,SAAUH,EAAQT,KAAKS,QAAQ,GAAGI,KAAKV,OAhB3C,2CADF,wDAbgB,OAYZW,EAZY,OAoClB3B,EAAgB2B,GAChB7B,EAAW,CAAEH,UAAU,EAAOC,OAAO,IArCnB,kDAuClBE,EAAW,CAAEH,UAAU,EAAOC,OAAO,IAvCnB,0DAAH,qDA2CnB,OAAIC,EAAQF,SACH,uBAAGiC,MAAO,CAAEC,UAAW,WAAvB,oBACEhC,EAAQD,MAEf,uBAAGgC,MAAO,CAAEC,UAAW,WAAvB,iDAMF,yBAAKC,UAAU,aACb,sEACC/B,EAAae,KAAI,gBAAGE,EAAH,EAAGA,KAAMG,EAAT,EAASA,SAAUC,EAAnB,EAAmBA,KAAMG,EAAzB,EAAyBA,OAAQE,EAAjC,EAAiCA,SAAjC,OAChB,yBAAKK,UAAU,OAAOC,IAAKf,GACzB,yBAAKc,UAAU,aACb,0BAAMA,UAAU,cAAcd,GAC9B,wBAAIc,UAAU,gBAAd,UAAiCX,EAAjC,aAA8CC,GAA9C,KACA,2BAAIG,GACJ,8BAAOE,WCtEnBO,IAASC,OAAO,kBAAC,EAAD,MAA0BC,SAASC,eAAe,W","file":"static/js/main.b507650a.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n// import { test } from \"./test\";\r\nimport \"./styles.css\";\r\n\r\nconst TopFiveIceCreamShops = () => {\r\n  const [request, setRequest] = useState({ fetching: false, error: false });\r\n  const [businessData, setbusinessData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getBusinesses();\r\n  }, []);\r\n\r\n  const getBusinesses = async () => {\r\n    setRequest({ fetching: true, error: false });\r\n    const AUTH = `Bearer ${process.env.REACT_APP_FUSION_API_KEY}`;\r\n    const BUSINESS_URL = `https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=Ice%20Cream%20Shop&location=Alpharetta%2C%20GA&limit=5`;\r\n\r\n    try {\r\n      const businesses = await axios.get(BUSINESS_URL, {\r\n        headers: {\r\n          Authorization: AUTH,\r\n        },\r\n      });\r\n\r\n      const result = await Promise.all(\r\n        businesses.data.businesses.map(\r\n          async ({ id, name, image_url, location }) => {\r\n            const { address1, city } = location;\r\n\r\n            const REVIEW_URL = `https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/${id}/reviews`;\r\n            const reviews = await axios.get(REVIEW_URL, {\r\n              headers: {\r\n                Authorization: AUTH,\r\n              },\r\n            });\r\n\r\n            return {\r\n              name,\r\n              image_url,\r\n              address1,\r\n              city,\r\n              review: reviews.data.reviews[0].text,\r\n              reviewer: reviews.data.reviews[0].user.name,\r\n            };\r\n          }\r\n        )\r\n      );\r\n\r\n      setbusinessData(result);\r\n      setRequest({ fetching: false, error: false });\r\n    } catch (error) {\r\n      setRequest({ fetching: false, error: true });\r\n    }\r\n  };\r\n\r\n  if (request.fetching) {\r\n    return <p style={{ textAlign: \"center\" }}>Fetching Data...</p>;\r\n  } else if (request.error) {\r\n    return (\r\n      <p style={{ textAlign: \"center\" }}>\r\n        There was an error while retreiving the data!\r\n      </p>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Top Five Ice Cream Shops in Alpharetta</h2>\r\n      {businessData.map(({ name, address1, city, review, reviewer }) => (\r\n        <div className=\"card\" key={name}>\r\n          <div className=\"card-body\">\r\n            <span className=\"card-title\">{name}</span>\r\n            <h5 className=\"card-address\">{`${address1}, ${city}`} </h5>\r\n            <p>{review}</p>\r\n            <span>{reviewer}</span>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopFiveIceCreamShops;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TopFiveIceCreamShops from './components/TopFiveIceCreamShops';\r\n\r\nReactDOM.render(<TopFiveIceCreamShops />, document.getElementById('root')); \r\n\r\n"],"sourceRoot":""}